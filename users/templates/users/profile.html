{% extends "main/base.html" %}
{% load i18n %}

{% block content %}
<h2>{% trans "Профиль пользователя" %}</h2>

<p>{% trans "Имя" %}: {{ user.username }}</p>
<p>{% trans "Email" %}: {{ user.email }}</p>
<p>{% trans "Телефон" %}: {{ user.phone }}</p>
<p>{% trans "Роль" %}: {{ user.get_role_display }}</p>

<a class="btn btn-primary" href="{% url 'users:profile_edit' %}">{% trans "Редактировать профиль" %}</a>
<a class="btn btn-link" href="{% url 'users:logout' %}">{% trans "Выйти" %}</a>

<hr>

{% if user.role == "employer" %}
    <h3>{% trans "Ваши вакансии" %}</h3>
    {% if jobs %}
        <ul class="list-group">
        {% for job in jobs %}
            <li class="list-group-item d-flex justify-content-between align-items-start">
                <div>
                    <strong>{{ job.title }}</strong> — {{ job.location }}
                    <br>
                    <small>{{ job.get_employment_type_display }} | {{ job.get_schedule_display }} | {{ job.get_experience_level_display }}</small>
                </div>
                <div>
                    <a class="btn btn-sm btn-outline-primary me-1" href="{% url 'Job:edit_job' job.id %}">
                        {% trans "Редактировать" %}
                    </a>
                    
                    <a class="btn btn-sm btn-outline-danger" href="{% url 'Job:delete_job' job.id %}">
                        {% trans "Удалить" %}
                    </a>
                    
                </div>
            </li>
        {% endfor %}
        </ul>

        {% if is_paginated %}
            <nav aria-label="Page navigation">
                <ul class="pagination mt-2">
                    {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.previous_page_number }}">&laquo; {% trans "Назад" %}</a>
                        </li>
                    {% endif %}
                    {% for num in paginator.page_range %}
                        <li class="page-item {% if page_obj.number == num %}active{% endif %}">
                            <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                        </li>
                    {% endfor %}
                    {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.next_page_number }}">{% trans "Вперёд" %} &raquo;</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        {% endif %}
    {% else %}
        <p>{% trans "Вакансий пока нет." %}</p>
    {% endif %}

{% elif user.role == "candidate" %}
    <h3>{% trans "Ваше резюме" %}</h3>
    {% if cv %}
        <p><strong>{{ cv.title }}</strong></p>
        <p>{{ cv.description|linebreaks }}</p>
        <a class="btn btn-outline-primary" href="{% url 'candidates:cv_edit' cv.id %}">{% trans "Редактировать резюме" %}</a>
        <a class="btn btn-outline-danger" href="{% url 'candidates:cv_delete' cv.id %}">{% trans "Удалить резюме" %}</a>
    {% else %}
        <p>{% trans "Резюме не создано." %}</p>
        <a class="btn btn-primary" href="{% url 'candidates:cv_create' %}">{% trans "Создать резюме (CV)" %}</a>
    {% endif %}
{% endif %}
{% endblock %}
